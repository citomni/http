{#
  This file is part of the CitOmni framework.
  Low overhead, high performance, ready for anything.

  For more information, visit https://github.com/citomni

  Copyright (c) 2012-present Lars Grove Mortensen
  SPDX-License-Identifier: MIT

  For full copyright, trademark, and license information,
  please see the LICENSE file distributed with this source code.
#}
{% extends "public/status_layout.html@citomni/http" %}

{% block addon_css %}

	/*
	@media (max-width: 520px){
		.header .logo{ height: 28px; }
	}
	*/

	.badge--warning{
		background: rgba(255,171,0,.15);  /* amber */
		color: #ff8f00;                    /* amber 800-ish */
		border-color: rgba(255,171,0,.35);
	}

	.badge--danger {
		background: rgba(211,47,47,.12);
		color: var(--md-danger);
		border-color: rgba(211,47,47,.25);
	}

	.badge--neutral{
		background: rgba(68,72,81,.10);
		color: var(--md-text-muted);
		border-color: rgba(68,72,81,.25);
	}

	/* Terminal-flavored panel: understated, readable, no gimmicks */
	.panel--terminal{
		/* Base surface tuned for both light/dark schemes */
		background: #0f1115;            /* dark neutral */
		color: #cfd6e4;                 /* high-contrast text */
		border: 1px solid #222838;
		border-radius: calc(var(--radius) - 4px);
		box-shadow: inset 0 1px 0 rgba(255,255,255,.03);
		font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
		padding: calc(var(--pad) - 2px);
	}
	.panel--terminal pre{
		margin: 0;
		white-space: pre;               /* keep exact formatting */
	}

	/* Optional subtle "terminal chrome" header */
	.panel--terminal::before{
		/* Accessible label; keep it minimal */
		content: "terminal";
		display: block;
		margin: -6px -6px 10px;
		padding: 6px 8px;
		font-size: 12px;
		letter-spacing: .2px;
		color: #9aa6b2;
		border-bottom: 1px solid #1a2030;
		background: linear-gradient(180deg, rgba(255,255,255,.04), transparent 70%);
	}

	.panel--header::before{
		display: block;
		margin: -6px -6px 30px;
		padding: 6px 8px;
		font-size: 12px;
		letter-spacing: .2px;
		color: #9aa6b2;
		border-bottom: 1px solid #1a2030;
		background: linear-gradient(180deg, rgba(255,255,255,.04), transparent 70%);
	}

	/* Respect user preference for light mode */
	@media (prefers-color-scheme: light){
		.panel--terminal{
			background: #0f1115;        /* keep dark for terminal contrast */
			color: #e6ebf2;
			border-color: #1e2636;
		}
		.panel--terminal::before{
			color: #b3becc;
			border-bottom-color: #1e2636;
		}
	}

	/* Hide if empty (works in modern browsers) */
	.panel:has(pre:empty){ display:none; }

	.panel--sysinfo::before{
		content: "System information";
	}

	.panel--packages::before{
		content: "Packages installed";
	}

	.panel--routes::before{
		content: "Routes (prod)";
	}

	.panel--cfg::before{
		content: "Config (prod)";
	}

	.panel--cfg-flat::before{
		content: "Flat config (prod)";
	}

	.panel--cfg-dev::before{
		content: "Complete CFG (dev)";
	}

	.panel--cfg-stage::before{
		content: "Complete CFG (stage)";
	}

	.panel--cfg-prod::before{
		content: "Complete CFG (prod)";
	}
		
{% endblock %}


{% block main_content %}

	<p class="lead">{{ $lead_text }}</p>

	<!-- Optional key/value quick facts -->
	<dl class="meta">
		<dt>Status:</dt><dd>{{ $status_code }}{# {{ $status_text }} #}</dd>
	</dl>

	<div class="panel panel--header panel--sysinfo" role="region" aria-label="System information">
		<pre>{{ $sysinfoJson }}</pre>
	</div>

	<div class="panel panel--header panel--packages" role="region" aria-label="Packages">
		<pre>{{ $packagesJson }}</pre>
	</div>

	<div class="panel panel--header panel--routes" role="region" aria-label="Routes (prod)">
		<pre>{{ $routesPhpBody }}</pre>
	</div>

	<div class="panel panel--header panel--cfg" role="region" aria-label="Config (prod)">
		<pre>{{ $cfgPhpExRoutesBody }}</pre>
	</div>

	<div class="panel panel--header panel--cfg-flat" role="region" aria-label="Flat config (prod)">
		<pre>{{ $cfgFlatJson }}</pre>
	</div>

	<div class="panel panel--header panel--cfg-dev" role="region" aria-label="Complete CFG (dev)">
		<pre>{{ $cfgEnvDevJson }}</pre>
	</div>

	<div class="panel panel--header panel--cfg-stage" role="region" aria-label="Complete CFG (stage)">
		<pre>{{ $cfgEnvStageJson }}</pre>
	</div>

	<div class="panel panel--header panel--cfg-prod" role="region" aria-label="Complete CFG (prod)">
		<pre>{{ $cfgEnvProdJson }}</pre>
	</div>
	
{% endblock %}